# Cabinet Builder

## Build And Run
- envs
  - local
  - dev
  - prod
- commands
<pre>
  node ./server.js ENV=[ENV] services=cabinet,canvas-buddy
</pre>


## Corner Stone Code Locations

### watch.js
&nbsp;&nbsp;Simple watch bundler that builds your html and js files on change.

### public/js/utils/utils.js
&nbsp;&nbsp;This file is used to safely add to the standard library.

### public/js/utils/dom-utils.js
&nbsp;&nbsp;Dom reading and manipulation functions.

### public/js/utils/string-math-evaluator
&nbsp;&nbsp;Has a global and a local scope used to evaluate mathmatical expressions.

### public/js/utils/$t.js
&nbsp;&nbsp;Simple html templating function. "Angularesk" {{js code}}

&nbsp;&nbsp;<b>Repeat Array</b>
<pre>      <[tag]:t repeat='[elem] in [array]'>[html]<&#47;[tag]:t></pre>

&nbsp;&nbsp;<b>Repeat Object</b>
<pre>      <[tag]:t repeat='[key], [elem] in [object]'>[html]<&#47;[tag]:t></pre>

&nbsp;&nbsp;<b>Repeat Over Indices</b>
<pre>      <[tag]:t repeat='[index] in [startIndex]..[endIndex]'>[html]<&#47;[tag]:t></pre>

&nbsp;&nbsp;<b>Repeat Defined Template</b>
<pre>      <[tag]:t [repeatExpression] $t-id='[templateLocation]'><&#47;[tag]:t></pre>

&nbsp;&nbsp;<b>Defined Template</b>
<pre>      <[tag]:t $t-id='[templateLocation]'>[scopeVariable]<&#47;[tag]:t></pre>

## GO Over
### public/js/utils/tolerance.js
&nbsp;&nbsp;Equality is hard to come by, most calculated values must be compaired using a tolerance.

### public/js/utils/tolerance-map.js
&nbsp;&nbsp;This will group objects bases on tolerance values. If you want all "matches"
to a particluar object it will return nieghboring group objects if object is not smack
dab in the center of its group/s (groups if grouped by multiple attributes).

### pulbic/js/utis/lists/expandable(-list|-object).js
&nbsp;&nbsp;Governs most list Displays. Usually expandable however this feature can be disabled.

### ~/generated/EPNTS.js
### public/js/utils/endpoints.js
### ~/public/json/endpoints.json
&nbsp;&nbsp;EPNTS.js (generated by watch/builder) uses the endpoints.js constructor passing in the endpoints.json object along with the current environment to build an endpoint object for the given environment. EPNTS.getEnv() will return the environment that it is configured for.

### ~/app-src/objects/assembly/assembly.js
&nbsp;&nbsp;defines all parts and thier sub parts.
- id() - a globally "unique" identifier
- partCode() - object type identifier
- partCode(true) - location identifier
- userFriendlyId() - Cabinet specific unique indexed identifier (for display purposes)

### TODO
#### Urgent
- Sanitize html: $t.clean

#### Annoying
- HTML build changes are only applied the next time server is started.
- Parts3D display is not reflecting divider type on create (base:T is always full on creation)

#### When I get around to it
- "Imperial (us)" does not add implicit multiplication stringMathEval
- hover help/error text
- Clean and seperate Object.(getSet|get|set);
- figure out three-view hidden lines
- ensure if new property is added existing configs updated with default value
- StringMathEvaluator: Math.atan(3/4)* (180/Math.PI) works but Math.atan(3/4)*(180/Math.PI) does not
